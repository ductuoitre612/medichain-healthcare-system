<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>T·∫°o B·ªánh √Ån M·ªõi - MediChain</title>

    <!-- External CSS -->
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <div class="header">
        <button class="back-btn" onclick="goBack()">‚Üê Quay l·∫°i</button>
        <div class="header-title">T·∫°o B·ªánh √Ån M·ªõi</div>
        <div class="wallet-badge" id="walletBadge">ƒêang k·∫øt n·ªëi...</div>
      </div>

      <!-- Form Card -->
      <div class="form-card">
        <div class="form-header">
          <h2>üìã Th√¥ng tin b·ªánh √°n</h2>
          <p>
            Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin b·ªánh √°n. D·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c l∆∞u tr·ªØ an
            to√†n tr√™n blockchain.
          </p>
        </div>

        <form id="medicalRecordForm">
          <!-- Patient Information -->
          <div class="form-section">
            <div class="section-title">üë§ Th√¥ng tin b·ªánh nh√¢n</div>
            <div class="form-row">
              <div class="form-group">
                <label>ID B·ªánh nh√¢n <span class="required">*</span></label>
                <input
                  type="text"
                  id="patientId"
                  required
                  placeholder="0x..."
                />
                <div class="input-hint">
                  Object ID c·ªßa b·ªánh nh√¢n tr√™n blockchain
                </div>
              </div>
              <div class="form-group">
                <label>H·ªç v√† t√™n <span class="required">*</span></label>
                <input
                  type="text"
                  id="patientName"
                  required
                  placeholder="Nguy·ªÖn VƒÉn A"
                />
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Ng√†y sinh</label>
                <input type="date" id="dateOfBirth" />
              </div>
              <div class="form-group">
                <label>Gi·ªõi t√≠nh</label>
                <select id="gender">
                  <option value="">-- Ch·ªçn --</option>
                  <option value="male">Nam</option>
                  <option value="female">N·ªØ</option>
                  <option value="other">Kh√°c</option>
                </select>
              </div>
            </div>
          </div>

          <!-- Doctor Information -->
          <div class="form-section">
            <div class="section-title">üë®‚Äç‚öïÔ∏è Th√¥ng tin b√°c sƒ©</div>
            <div class="form-row">
              <div class="form-group">
                <label>ID B√°c sƒ© <span class="required">*</span></label>
                <input type="text" id="doctorId" required placeholder="0x..." />
                <div class="input-hint">
                  Object ID c·ªßa b√°c sƒ© tr√™n blockchain
                </div>
              </div>
              <div class="form-group">
                <label>T√™n b√°c sƒ© <span class="required">*</span></label>
                <input
                  type="text"
                  id="doctorName"
                  required
                  placeholder="BS. Nguy·ªÖn VƒÉn B"
                />
              </div>
            </div>
          </div>

          <!-- Medical Record Details -->
          <div class="form-section">
            <div class="section-title">üè• Chi ti·∫øt kh√°m b·ªánh</div>
            <div class="form-row">
              <div class="form-group">
                <label>Ng√†y kh√°m <span class="required">*</span></label>
                <input type="date" id="visitDate" required />
              </div>
              <div class="form-group">
                <label>Lo·∫°i kh√°m</label>
                <select id="visitType">
                  <option value="general">Kh√°m t·ªïng qu√°t</option>
                  <option value="followup">T√°i kh√°m</option>
                  <option value="emergency">C·∫•p c·ª©u</option>
                  <option value="specialist">Chuy√™n khoa</option>
                </select>
              </div>
            </div>

            <div class="form-group full-width">
              <label>Tri·ªáu ch·ª©ng <span class="required">*</span></label>
              <textarea
                id="symptoms"
                required
                placeholder="M√¥ t·∫£ c√°c tri·ªáu ch·ª©ng c·ªßa b·ªánh nh√¢n..."
              ></textarea>
            </div>

            <div class="form-group full-width">
              <label>Ch·∫©n ƒëo√°n <span class="required">*</span></label>
              <div class="diagnosis-list" id="diagnosisList">
                <div class="diagnosis-item">
                  <input
                    type="text"
                    placeholder="Nh·∫≠p ch·∫©n ƒëo√°n..."
                    class="diagnosis-input"
                  />
                </div>
              </div>
              <button type="button" class="add-btn" onclick="addDiagnosis()">
                + Th√™m ch·∫©n ƒëo√°n
              </button>
            </div>

            <div class="form-group full-width">
              <label>ƒêi·ªÅu tr·ªã / ƒê∆°n thu·ªëc</label>
              <textarea
                id="treatment"
                placeholder="M√¥ t·∫£ ph∆∞∆°ng ph√°p ƒëi·ªÅu tr·ªã v√† thu·ªëc k√™ ƒë∆°n..."
              ></textarea>
            </div>

            <div class="form-group full-width">
              <label>Ghi ch√∫ th√™m</label>
              <textarea id="notes" placeholder="C√°c ghi ch√∫ kh√°c..."></textarea>
            </div>
          </div>

          <!-- File Attachments -->
          <div class="form-section">
            <div class="section-title">üìé T·ªáp ƒë√≠nh k√®m</div>
            <div class="form-group full-width">
              <label>T·∫£i l√™n k·∫øt qu·∫£ x√©t nghi·ªám, h√¨nh ·∫£nh X-quang, v.v.</label>
              <div
                class="file-upload"
                onclick="document.getElementById('fileInput').click()"
              >
                <div class="file-upload-icon">üìÅ</div>
                <div>Nh·∫•p ƒë·ªÉ t·∫£i l√™n ho·∫∑c k√©o th·∫£ file v√†o ƒë√¢y</div>
                <div class="input-hint">
                  H·ªó tr·ª£: PDF, JPG, PNG (t·ªëi ƒëa 10MB)
                </div>
                <input
                  type="file"
                  id="fileInput"
                  multiple
                  accept=".pdf,.jpg,.jpeg,.png"
                  onchange="handleFileSelect(event)"
                />
              </div>
              <div class="file-list" id="fileList"></div>
            </div>
          </div>

          <!-- Form Actions -->
          <div class="form-actions">
            <button type="button" class="cancel-btn" onclick="goBack()">
              H·ªßy b·ªè
            </button>
            <button type="submit" class="submit-btn" id="submitBtn">
              üíæ L∆∞u b·ªánh √°n l√™n Blockchain
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
      <div class="loading-content">
        <div class="spinner"></div>
        <div class="loading-text">ƒêang x·ª≠ l√Ω giao d·ªãch...</div>
        <div class="loading-subtext">Vui l√≤ng x√°c nh·∫≠n trong Sui Wallet</div>
      </div>
    </div>

    <!-- Success Modal -->
    <div class="success-modal" id="successModal">
      <div class="success-content">
        <div class="success-icon">‚úÖ</div>
        <div class="success-title">T·∫°o b·ªánh √°n th√†nh c√¥ng!</div>
        <div class="success-message">
          B·ªánh √°n ƒë√£ ƒë∆∞·ª£c l∆∞u tr·ªØ an to√†n tr√™n Sui Blockchain
        </div>
        <div class="tx-hash" id="txHash">Transaction: 0x...</div>
        <div class="success-actions">
          <button class="view-explorer-btn" onclick="viewOnExplorer()">
            üîç Xem tr√™n Explorer
          </button>
          <button class="back-dashboard-btn" onclick="backToDashboard()">
            ‚Üê V·ªÅ Dashboard
          </button>
        </div>
      </div>
    </div>

    <!-- External JavaScript -->
    <script src="medical-record.js"></script>
  </body>
</html>
